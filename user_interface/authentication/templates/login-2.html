<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Carousel with Image</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #25283D;
        }
        .bg-image-vertical { position: relative; overflow: hidden; background-repeat: no-repeat; background-position: right center; background-size: auto 100%; }
        @media (min-width: 1025px) { .h-custom-2 { height: 100%; } }
        .vh-100 { height: 100vh; }
        .carousel-item { transition: transform 0.5s ease; }
        .position-absolute { z-index: 10; }
        .btn-toggle { position: absolute; top: 20px; right: 20px; z-index: 10; background-color: #94E8B4; border: none; }
        .btn { background-color: #94E8B4; border: none; }
        .form-control { background-color: white; color: #25283D; }
        .form-label { color: #ffffff; }
        .link-info { color: #94E8B4; }
        .carousel-inner { pointer-events: none; }
        .carousel-item { pointer-events: auto; }
        .carousel img { object-fit: cover; object-position: left; }
    </style>
</head>
<body>
<section class="vh-100">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-6 text-white">
                <div class="px-5 ms-xl-4">
                    <i class="fas fa-crow fa-2x me-3 pt-5 mt-xl-4" style="color: #94E8B4;"></i>
                    <span class="h1 fw-bold mb-0">Lakshmi</span>
                </div>

                <div id="loginCarousel" class="carousel slide" data-bs-ride="false">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <div class="d-flex align-items-center h-custom-2 px-5 ms-xl-4 mt-5 pt-5 pt-xl-0 mt-xl-n5">
                                <form style="width: 23rem;">
                                    <h3 class="fw-normal mb-3 pb-3" style="letter-spacing: 1px;">User Log in</h3>
                                    <div class="form-outline mb-4">
                                        <input type="email" id="form2Example18" class="form-control form-control-lg" />
                                        <label class="form-label" for="form2Example18">Email address</label>
                                    </div>
                                    <div class="form-outline mb-4">
                                        <input type="password" id="form2Example28" class="form-control form-control-lg" />
                                        <label class="form-label" for="form2Example28">Password</label>
                                    </div>
                                    <div class="pt-1 mb-4">
                                        <button class="btn btn-info btn-lg btn-block" type="button" id="userLoginButton">Login</button>
                                    </div>
                                    <p class="small mb-5 pb-lg-2"><a class="text-muted" href="#!">Forgot password?</a></p>
                                    <p>Don't have an account? <a href="register.html" class="link-info">Register here</a></p>
                                </form>
                            </div>
                        </div>

                        <div class="carousel-item">
                            <div class="d-flex align-items-center h-custom-2 px-5 ms-xl-4 mt-5 pt-5 pt-xl-0 mt-xl-n5">
                                <form style="width: 23rem;">
                                    <h3 class="fw-normal mb-3 pb-3" style="letter-spacing: 1px;">Employee Login</h3>
                                    <div class="form-outline mb-4">
                                        <input type="text" id="form2Example38" class="form-control form-control-lg" />
                                        <label class="form-label" for="form2Example38">Username</label>
                                    </div>
                                    <div class="form-outline mb-4">
                                        <input type="password" id="form2Example48" class="form-control form-control-lg" />
                                        <label class="form-label" for="form2Example48">Password</label>
                                    </div>
                                    <div class="pt-1 mb-4">
                                        <button class="btn btn-info btn-lg btn-block" type="button" id="employeeLoginButton">Login</button>
                                    </div>
                                    <p class="small mb-5 pb-lg-2"><a class="text-muted" href="#!">Forgot password?</a></p>
                                    <p>Don't have an account? <a href="register.html" class="link-info">Register here</a></p>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>5s
            </div>

            <div class="col-sm-6 px-0 d-none d-sm-block">
                <div id="imageCarousel" class="carousel slide" data-bs-ride="false">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="{{ url_for('static', filename='images/01.jpg') }}" alt="Login image" class="w-100 vh-100">
                        </div>
                        <div class="carousel-item">
                            <img src="{{ url_for('static', filename='images/02.jpg') }}" alt="Employee login image" class="w-100 vh-100">
                        </div>
                        
                    </div>
                </div>
                <button id="toggleButton" class="btn btn-warning btn-toggle" onclick="toggleLogin()">
                    Are you an employee?
                </button>
            </div>
        </div>
    </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
    let isEmployee = true; // State to track login form
    let isAnimating = false; // State to track animation

    document.getElementById('userLoginButton').addEventListener('click', async () => {
        const email = document.getElementById('form2Example18').value;
        const password = document.getElementById('form2Example28').value;

        const response = await fetch('/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, password })
        });

        const result = await response.json();
        alert(result.message || result.error);
    });

    document.getElementById('employeeLoginButton').addEventListener('click', async () => {
        const username = document.getElementById('form2Example38').value;
        const password = document.getElementById('form2Example48').value;

        const response = await fetch('/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email: username, password }) // Use email field for simplicity
        });

        const result = await response.json();
        alert(result.message || result.error);
    });

    document.getElementById('toggleButton').addEventListener('click', () => {
        if (isAnimating) return; // Prevent multiple clicks

        isAnimating = true;
        isEmployee = !isEmployee;

        const carousel = document.getElementById('loginCarousel');
        const carouselInstance = new bootstrap.Carousel(carousel, {
            interval: false
        });

        if (isEmployee) {
            carouselInstance.next();
        } else {
            carouselInstance.prev();
        }

        setTimeout(() => {
            isAnimating = false; // Reset animation state
        }, 500);
    });
</script>
